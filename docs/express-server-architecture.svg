<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="1400"
   height="1000"
   version="1.1"
   id="svg160"
   sodipodi:docname="express-server-architecture.svg"
   inkscape:version="1.4.2 (ebf0e940, 2025-05-08)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview160"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="1.4139736"
     inkscape:cx="966.42542"
     inkscape:cy="587.70547"
     inkscape:window-width="1472"
     inkscape:window-height="923"
     inkscape:window-x="0"
     inkscape:window-y="33"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg160" />
  <defs
     id="defs20">
    <!-- Modern gradients for visual appeal -->
    <linearGradient
       id="headerGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#667eea;stop-opacity:1"
         id="stop1" />
      <stop
         offset="100%"
         style="stop-color:#764ba2;stop-opacity:1"
         id="stop2" />
    </linearGradient>
    <linearGradient
       id="serverGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#4facfe;stop-opacity:1"
         id="stop3" />
      <stop
         offset="100%"
         style="stop-color:#00f2fe;stop-opacity:1"
         id="stop4" />
    </linearGradient>
    <linearGradient
       id="middlewareGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#43e97b;stop-opacity:1"
         id="stop5" />
      <stop
         offset="100%"
         style="stop-color:#38f9d7;stop-opacity:1"
         id="stop6" />
    </linearGradient>
    <linearGradient
       id="endpointGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#fa709a;stop-opacity:1"
         id="stop7" />
      <stop
         offset="100%"
         style="stop-color:#fee140;stop-opacity:1"
         id="stop8" />
    </linearGradient>
    <linearGradient
       id="databaseGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#ff9a9e;stop-opacity:1"
         id="stop9" />
      <stop
         offset="100%"
         style="stop-color:#fecfef;stop-opacity:1"
         id="stop10" />
    </linearGradient>
    <linearGradient
       id="agentGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#a8edea;stop-opacity:1"
         id="stop11" />
      <stop
         offset="100%"
         style="stop-color:#fed6e3;stop-opacity:1"
         id="stop12" />
    </linearGradient>
    <linearGradient
       id="externalGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#ffecd2;stop-opacity:1"
         id="stop13" />
      <stop
         offset="100%"
         style="stop-color:#fcb69f;stop-opacity:1"
         id="stop14" />
    </linearGradient>
    <linearGradient
       id="processGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#667eea;stop-opacity:1"
         id="stop15" />
      <stop
         offset="100%"
         style="stop-color:#764ba2;stop-opacity:1"
         id="stop16" />
    </linearGradient>
    <linearGradient
       id="sslGradient"
       x1="0%"
       y1="0%"
       x2="100%"
       y2="100%">
      <stop
         offset="0%"
         style="stop-color:#ffecd2;stop-opacity:1"
         id="stop17" />
      <stop
         offset="100%"
         style="stop-color:#fcb69f;stop-opacity:1"
         id="stop18" />
    </linearGradient>
    <!-- Drop shadow filter -->
    <filter
       id="dropshadow"
       x="-0.0035714286"
       y="-0.016666667"
       width="1.0071429"
       height="1.0333333">
      <feDropShadow
         dx="3"
         dy="3"
         stdDeviation="3"
         flood-color="#000000"
         flood-opacity="0.2" />
    </filter>
    <!-- Glow effect -->
    <filter
       id="glow"
       x="-inf"
       y="-1.01"
       width="inf"
       height="2.52">
      <feGaussianBlur
         stdDeviation="3"
         result="coloredBlur"
         id="feGaussianBlur18" />
      <feMerge
         id="feMerge19">
        <feMergeNode
           in="coloredBlur"
           id="feMergeNode18" />
        <feMergeNode
           in="SourceGraphic"
           id="feMergeNode19" />
      </feMerge>
    </filter>
    <!-- Styles -->
    <style
       id="style19">
      .title { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 28px; 
        font-weight: 700; 
        fill: #ffffff; 
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      }
      .subtitle { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 16px; 
        font-weight: 400; 
        fill: #ffffff; 
        opacity: 0.9;
      }
      .section-header { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 16px; 
        font-weight: 600; 
        fill: #ffffff; 
      }
      .header { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 14px; 
        font-weight: 600; 
        fill: #2c3e50; 
      }
      .text { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 11px; 
        fill: #34495e; 
        font-weight: 500;
      }
      .small-text { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 9px; 
        fill: #7f8c8d; 
        font-weight: 400;
      }
      .feature-text { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        font-size: 10px; 
        fill: #2c3e50; 
        font-weight: 500;
      }
      .icon-text {
        font-family: 'Segoe UI Symbol', 'Segoe UI', sans-serif;
        font-size: 16px;
        fill: #2c3e50;
      }
      .white-icon {
        font-family: 'Segoe UI Symbol', 'Segoe UI', sans-serif;
        font-size: 16px;
        fill: #ffffff;
      }
      .component-text {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-size: 10px;
        fill: #ffffff;
        font-weight: 500;
      }
      
      .ssl-layer { 
        fill: url(#sslGradient); 
        stroke: #e67e22; 
        stroke-width: 2; 
        rx: 12; 
        filter: url(#dropshadow);
      }
      .server-core { 
        fill: url(#serverGradient); 
        stroke: #3498db; 
        stroke-width: 2; 
        rx: 12; 
        filter: url(#dropshadow);
      }
      .middleware { 
        fill: url(#middlewareGradient); 
        stroke: #27ae60; 
        stroke-width: 2; 
        rx: 12; 
        filter: url(#dropshadow);
      }
      .endpoint { 
        fill: url(#endpointGradient); 
        stroke: #e74c3c; 
        stroke-width: 2; 
        rx: 10; 
        filter: url(#dropshadow);
      }
      .database { 
        fill: url(#databaseGradient); 
        stroke: #e91e63; 
        stroke-width: 2; 
        rx: 10; 
        filter: url(#dropshadow);
      }
      .agent { 
        fill: url(#agentGradient); 
        stroke: #9b59b6; 
        stroke-width: 2; 
        rx: 10; 
        filter: url(#dropshadow);
      }
      .external { 
        fill: url(#externalGradient); 
        stroke: #f39c12; 
        stroke-width: 2; 
        rx: 10; 
        filter: url(#dropshadow);
      }
      .process { 
        fill: url(#processGradient); 
        stroke: #8e44ad; 
        stroke-width: 2; 
        rx: 10; 
        filter: url(#dropshadow);
      }
      .config-box { 
        fill: #ecf0f1; 
        stroke: #bdc3c7; 
        stroke-width: 2; 
        rx: 8; 
        filter: url(#dropshadow);
      }
      
      .arrow { 
        stroke: #34495e; 
        stroke-width: 3; 
        marker-end: url(#arrowhead); 
        filter: url(#glow);
      }
      .data-flow { 
        stroke: #e67e22; 
        stroke-width: 3; 
        stroke-dasharray: 8,4; 
        marker-end: url(#arrowhead-orange); 
        filter: url(#glow);
      }
    </style>
    <!-- Improved arrow markers -->
    <marker
       id="arrowhead"
       markerWidth="12"
       markerHeight="9"
       refX="11"
       refY="4.5"
       orient="auto">
      <polygon
         points="0 0, 12 4.5, 0 9"
         fill="#34495e"
         id="polygon19" />
    </marker>
    <marker
       id="arrowhead-orange"
       markerWidth="12"
       markerHeight="9"
       refX="11"
       refY="4.5"
       orient="auto">
      <polygon
         points="0 0, 12 4.5, 0 9"
         fill="#e67e22"
         id="polygon20" />
    </marker>
  </defs>
  <!-- Background with gradient -->
  <rect
     width="1400"
     height="1000"
     fill="url(#headerGradient)"
     id="rect20" />
  <!-- Main content area -->
  <rect
     x="20"
     y="80"
     width="1360"
     height="900"
     fill="#ffffff"
     rx="15"
     filter="url(#dropshadow)"
     id="rect21" />
  <!-- Header Section -->
  <text
     x="700"
     y="40"
     text-anchor="middle"
     class="title"
     id="text21">🚀 Architecture du Serveur Express.js avec Agent IA</text>
  <text
     x="700"
     y="65"
     text-anchor="middle"
     class="subtitle"
     id="text22">Serveur TypeScript Prêt pour la Production avec Intégration IA</text>
  <!-- SSL/HTTPS Layer -->
  <rect
     x="50"
     y="110"
     width="1300"
     height="60"
     class="ssl-layer"
     id="rect22" />
  <text
     x="80"
     y="130"
     class="white-icon"
     id="text23">🔒</text>
  <text
     x="110"
     y="135"
     class="section-header"
     id="text24">Couche de Sécurité HTTPS/SSL</text>
  <text
     x="700"
     y="150"
     text-anchor="middle"
     class="component-text"
     id="text25">Chiffrement SSL/TLS avec server.key &amp; server.cert</text>
  <text
     x="700"
     y="162"
     text-anchor="middle"
     class="component-text"
     id="text26">Communication sécurisée pour toutes les connexions clients</text>
  <!-- Express Server Core -->
  <rect
     x="80"
     y="190"
     width="1240"
     height="70"
     class="server-core"
     id="rect26" />
  <text
     x="110"
     y="210"
     class="white-icon"
     id="text27">⚡</text>
  <text
     x="140"
     y="215"
     class="section-header"
     id="text28">Cœur du Serveur Express.js</text>
  <text
     x="700"
     y="235"
     text-anchor="middle"
     class="component-text"
     id="text29">Port: ${PORT} | Hôte: ${HOST} | Point d'entrée: index.ts</text>
  <text
     x="700"
     y="248"
     text-anchor="middle"
     class="component-text"
     id="text30">Runtime Node.js haute performance avec compilation TypeScript</text>
  <!-- Middleware Stack -->
  <rect
     x="120"
     y="280"
     width="1160"
     height="120"
     class="middleware"
     id="rect30" />
  <text
     x="150"
     y="300"
     class="white-icon"
     id="text31">🛡️</text>
  <text
     x="180"
     y="305"
     class="section-header"
     id="text32">Pile de Middleware Sécurité &amp; Performance</text>
  <!-- Individual Middleware Components -->
  <rect
     x="150"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect32" />
  <text
     x="170"
     y="335"
     class="icon-text"
     id="text33">🛡️</text>
  <text
     x="220"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text34">Helmet</text>
  <text
     x="220"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text35">En-têtes Sécurité</text>
  <rect
     x="310"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect35" />
  <text
     x="330"
     y="335"
     class="icon-text"
     id="text36">🌐</text>
  <text
     x="380"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text37">CORS</text>
  <text
     x="380"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text38">Cross-Origin</text>
  <rect
     x="470"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect38" />
  <text
     x="490"
     y="335"
     class="icon-text"
     id="text39">⏱️</text>
  <text
     x="540"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text40">Limiteur Débit</text>
  <text
     x="540"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text41">60 req/min</text>
  <rect
     x="630"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect41" />
  <text
     x="650"
     y="335"
     class="icon-text"
     id="text42">📦</text>
  <text
     x="700"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text43">Compression</text>
  <text
     x="700"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text44">gzip/deflate</text>
  <rect
     x="790"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect44" />
  <text
     x="810"
     y="335"
     class="icon-text"
     id="text45">📝</text>
  <text
     x="860"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text46">Parseurs Corps</text>
  <text
     x="860"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text47">JSON/Raw/Text</text>
  <rect
     x="950"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect47" />
  <text
     x="970"
     y="335"
     class="icon-text"
     id="text48">🔐</text>
  <text
     x="1020"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text49">Auth Session</text>
  <text
     x="1020"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text50">Validation BD</text>
  <rect
     x="1110"
     y="320"
     width="140"
     height="35"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="8"
     id="rect50" />
  <text
     x="1130"
     y="335"
     class="icon-text"
     id="text51">⚙️</text>
  <text
     x="1180"
     y="340"
     text-anchor="middle"
     class="component-text"
     id="text52">Gestion Config</text>
  <text
     x="1180"
     y="350"
     text-anchor="middle"
     class="component-text"
     id="text53">Environnement</text>
  <!-- Middleware Details -->
  <text
     x="700"
     y="375"
     text-anchor="middle"
     class="component-text"
     id="text54">Limites Taille Requête: 1MB | En-têtes Sécurité: CSP, HSTS, X-Frame-Options</text>
  <text
     x="700"
     y="387"
     text-anchor="middle"
     class="component-text"
     id="text55">Gestion Session: Hachage SHA256 avec jetons alphanumériques aléatoires</text>
  <!-- API Endpoints -->
  <rect
     x="200"
     y="420"
     width="1000"
     height="100"
     class="endpoint"
     id="rect55" />
  <text
     x="230"
     y="440"
     class="white-icon"
     id="text56">🌐</text>
  <text
     x="260"
     y="445"
     class="section-header"
     id="text57">Points de Terminaison API RESTful</text>
  <!-- Individual Endpoints -->
  <rect
     x="230"
     y="460"
     width="180"
     height="40"
     fill="#fd7e14"
     stroke="#dc3545"
     stroke-width="2"
     rx="8"
     id="rect57" />
  <text
     x="250"
     y="475"
     class="icon-text"
     id="text58">🔑</text>
  <text
     x="320"
     y="480"
     text-anchor="middle"
     class="component-text"
     id="text59">POST /connexion</text>
  <text
     x="320"
     y="492"
     text-anchor="middle"
     class="component-text"
     id="text60">Authentification de Base</text>
  <rect
     x="430"
     y="460"
     width="180"
     height="40"
     fill="#fd7e14"
     stroke="#dc3545"
     stroke-width="2"
     rx="8"
     id="rect60" />
  <text
     x="450"
     y="475"
     class="icon-text"
     id="text61">💬</text>
  <text
     x="520"
     y="480"
     text-anchor="middle"
     class="component-text"
     id="text62">POST /chat/:agent</text>
  <text
     x="520"
     y="492"
     text-anchor="middle"
     class="component-text"
     id="text63">Moteur Conversation IA</text>
  <rect
     x="630"
     y="460"
     width="180"
     height="40"
     fill="#fd7e14"
     stroke="#dc3545"
     stroke-width="2"
     rx="8"
     id="rect63" />
  <text
     x="650"
     y="475"
     class="icon-text"
     id="text64">✅</text>
  <text
     x="720"
     y="480"
     text-anchor="middle"
     class="component-text"
     id="text65">POST /valider/:agent</text>
  <text
     x="720"
     y="492"
     text-anchor="middle"
     class="component-text"
     id="text66">Validation Données &amp; Zod</text>
  <rect
     x="830"
     y="460"
     width="180"
     height="40"
     fill="#fd7e14"
     stroke="#dc3545"
     stroke-width="2"
     rx="8"
     id="rect66" />
  <text
     x="850"
     y="475"
     class="icon-text"
     id="text67">❌</text>
  <text
     x="920"
     y="480"
     text-anchor="middle"
     class="component-text"
     id="text68">Gestionnaire Erreurs</text>
  <text
     x="920"
     y="492"
     text-anchor="middle"
     class="component-text"
     id="text69">Réponse 500 &amp; Journal</text>
  <rect
     x="1030"
     y="460"
     width="140"
     height="40"
     fill="#fd7e14"
     stroke="#dc3545"
     stroke-width="2"
     rx="8"
     id="rect69" />
  <text
     x="1050"
     y="475"
     class="icon-text"
     id="text70">📊</text>
  <text
     x="1100"
     y="480"
     text-anchor="middle"
     class="component-text"
     id="text71">Vérification Santé</text>
  <text
     x="1100"
     y="492"
     text-anchor="middle"
     class="component-text"
     id="text72">Moniteur Statut</text>
  <!-- Core System Components -->
  <!-- AI Agent System -->
  <rect
     x="80"
     y="550"
     width="400"
     height="140"
     class="agent"
     id="rect72" />
  <text
     x="110"
     y="570"
     class="icon-text"
     id="text73">🤖</text>
  <text
     x="140"
     y="575"
     class="header"
     id="text74">Système Agent IA</text>
  <!-- Agent Components -->
  <rect
     x="100"
     y="590"
     width="120"
     height="30"
     fill="#8e44ad"
     stroke="#6c3483"
     stroke-width="2"
     rx="6"
     id="rect74" />
  <text
     x="110"
     y="605"
     class="icon-text"
     id="text75">🎯</text>
  <text
     x="160"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text76">Agent Général</text>
  <rect
     x="240"
     y="590"
     width="120"
     height="30"
     fill="#8e44ad"
     stroke="#6c3483"
     stroke-width="2"
     rx="6"
     id="rect76" />
  <text
     x="250"
     y="605"
     class="icon-text"
     id="text77">🧠</text>
  <text
     x="300"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text78">Fournisseurs LLM</text>
  <rect
     x="380"
     y="590"
     width="80"
     height="30"
     fill="#8e44ad"
     stroke="#6c3483"
     stroke-width="2"
     rx="6"
     id="rect78" />
  <text
     x="390"
     y="605"
     class="icon-text"
     id="text79">⚙️</text>
  <text
     x="420"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text80">Gest. MCP</text>
  <!-- Agent Details -->
  <text
     x="280"
     y="635"
     text-anchor="middle"
     class="text"
     id="text81">Fournisseurs LLM: GitHub Copilot, Ollama, OpenAI</text>
  <text
     x="280"
     y="648"
     text-anchor="middle"
     class="text"
     id="text82">Serveurs MCP: filesystem, memory, context7</text>
  <text
     x="280"
     y="661"
     text-anchor="middle"
     class="small-text"
     id="text83">Limitation jetons, Gestion session, Traitement itératif</text>
  <text
     x="280"
     y="674"
     text-anchor="middle"
     class="small-text"
     id="text84">Types Agent: général, météo (architecture extensible)</text>
  <!-- Database Layer -->
  <rect
     x="500"
     y="550"
     width="380"
     height="140"
     class="database"
     id="rect84" />
  <text
     x="530"
     y="570"
     class="icon-text"
     id="text85">🗄️</text>
  <text
     x="560"
     y="575"
     class="header"
     id="text86">Couche Base de Données</text>
  <!-- Database Components -->
  <rect
     x="520"
     y="590"
     width="100"
     height="30"
     fill="#e74c3c"
     stroke="#c0392b"
     stroke-width="2"
     rx="6"
     id="rect86" />
  <text
     x="530"
     y="605"
     class="icon-text"
     id="text87">🐘</text>
  <text
     x="570"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text88">PostgreSQL</text>
  <rect
     x="640"
     y="590"
     width="100"
     height="30"
     fill="#e74c3c"
     stroke="#c0392b"
     stroke-width="2"
     rx="6"
     id="rect88" />
  <text
     x="650"
     y="605"
     class="icon-text"
     id="text89">📦</text>
  <text
     x="690"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text90">Référentiel</text>
  <rect
     x="760"
     y="590"
     width="100"
     height="30"
     fill="#e74c3c"
     stroke="#c0392b"
     stroke-width="2"
     rx="6"
     id="rect90" />
  <text
     x="770"
     y="605"
     class="icon-text"
     id="text91">🔧</text>
  <text
     x="810"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text92">ORM Personnalisé</text>
  <!-- Database Details -->
  <text
     x="690"
     y="635"
     text-anchor="middle"
     class="text"
     id="text93">Entités: Session, Utilisateur avec décorateurs TypeScript</text>
  <text
     x="690"
     y="648"
     text-anchor="middle"
     class="text"
     id="text94">Fonctionnalités: Pool connexions, Auto-migrations</text>
  <text
     x="690"
     y="661"
     text-anchor="middle"
     class="small-text"
     id="text95">Authentification: Hachage mot de passe SHA256 avec sel</text>
  <text
     x="690"
     y="674"
     text-anchor="middle"
     class="small-text"
     id="text96">Session: Jetons alphanumériques aléatoires avec expiration</text>
  <!-- External Services -->
  <rect
     x="900"
     y="550"
     width="420"
     height="140"
     class="external"
     id="rect96" />
  <text
     x="930"
     y="570"
     class="icon-text"
     id="text97">🌐</text>
  <text
     x="960"
     y="575"
     class="header"
     id="text98">Services IA Externes</text>
  <!-- External Service Components -->
  <rect
     x="920"
     y="590"
     width="110"
     height="30"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="6"
     id="rect98" />
  <text
     x="930"
     y="605"
     class="icon-text"
     id="text99">🚀</text>
  <text
     x="975"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text100">GitHub Copilot</text>
  <rect
     x="1050"
     y="590"
     width="80"
     height="30"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="6"
     id="rect100" />
  <text
     x="1060"
     y="605"
     class="icon-text"
     id="text101">🦙</text>
  <text
     x="1090"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text102">Ollama</text>
  <rect
     x="1150"
     y="590"
     width="80"
     height="30"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="6"
     id="rect102" />
  <text
     x="1160"
     y="605"
     class="icon-text"
     id="text103">🤖</text>
  <text
     x="1190"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text104">OpenAI</text>
  <rect
     x="1250"
     y="590"
     width="50"
     height="30"
     fill="#20c997"
     stroke="#17a2b8"
     stroke-width="2"
     rx="6"
     id="rect104" />
  <text
     x="1260"
     y="605"
     class="icon-text"
     id="text105">☁️</text>
  <text
     x="1275"
     y="610"
     text-anchor="middle"
     class="component-text"
     id="text106">Azure</text>
  <!-- External Services Details -->
  <text
     x="1110"
     y="635"
     text-anchor="middle"
     class="text"
     id="text107">Intégration API: OAuth 2.0, Authentification par jetons</text>
  <text
     x="1110"
     y="648"
     text-anchor="middle"
     class="text"
     id="text108">Modèles: GPT-4o, GPT-4o-mini, Llama, Modèles locaux</text>
  <text
     x="1110"
     y="661"
     text-anchor="middle"
     class="small-text"
     id="text109">Fonctionnalités: Limitation jetons, Vérif. santé, Auto-retry</text>
  <text
     x="1110"
     y="674"
     text-anchor="middle"
     class="small-text"
     id="text110">Basculement: Changement auto modèle &amp; équilibrage charge</text>
  <!-- Process Management -->
  <rect
     x="150"
     y="720"
     width="1100"
     height="80"
     class="process"
     id="rect110" />
  <text
     x="180"
     y="740"
     class="white-icon"
     id="text111">⚙️</text>
  <text
     x="210"
     y="745"
     class="section-header"
     id="text112">Gestion Processus &amp; Cycle de Vie</text>
  <!-- Process Management Components -->
  <rect
     x="180"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect112" />
  <text
     x="190"
     y="770"
     class="icon-text"
     id="text113">🔄</text>
  <text
     x="250"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text114">Arrêt Gracieux</text>
  <rect
     x="340"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect114" />
  <text
     x="350"
     y="770"
     class="icon-text"
     id="text115">📡</text>
  <text
     x="410"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text116">Gestion Signaux</text>
  <rect
     x="500"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect116" />
  <text
     x="510"
     y="770"
     class="icon-text"
     id="text117">🔗</text>
  <text
     x="570"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text118">Gest. Connexions</text>
  <rect
     x="660"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect118" />
  <text
     x="670"
     y="770"
     class="icon-text"
     id="text119">🤖</text>
  <text
     x="730"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text120">Nettoyage Agent</text>
  <rect
     x="820"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect120" />
  <text
     x="830"
     y="770"
     class="icon-text"
     id="text121">🗄️</text>
  <text
     x="890"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text122">Fermeture Pool BD</text>
  <rect
     x="980"
     y="755"
     width="140"
     height="30"
     fill="#6c757d"
     stroke="#495057"
     stroke-width="2"
     rx="6"
     id="rect122" />
  <text
     x="990"
     y="770"
     class="icon-text"
     id="text123">⏱️</text>
  <text
     x="1050"
     y="775"
     text-anchor="middle"
     class="component-text"
     id="text124">Contrôle Timeout</text>
  <!-- Feature Boxes at Bottom -->
  <!-- Environment Configuration -->
  <rect
     x="80"
     y="830"
     width="300"
     height="120"
     class="config-box"
     id="rect124" />
  <text
     x="100"
     y="850"
     class="icon-text"
     id="text125">⚙️</text>
  <text
     x="130"
     y="855"
     class="header"
     id="text126">Configuration Environnement</text>
  <text
     x="90"
     y="875"
     class="feature-text"
     id="text127">• PORT, HOST, SERVER_TERMINATE_TIMEOUT</text>
  <text
     x="90"
     y="890"
     class="feature-text"
     id="text128">• DB_USER, DB_HOST, DB_PASSWORD, DB_PORT</text>
  <text
     x="90"
     y="905"
     class="feature-text"
     id="text129">• LLM_PROVIDER, sélection LLM_MODEL</text>
  <text
     x="90"
     y="920"
     class="feature-text"
     id="text130">• GITHUB_TOKEN, MAX_LLM_ITERATIONS</text>
  <text
     x="90"
     y="935"
     class="feature-text"
     id="text131">• SSL_CERT_PATH, SSL_KEY_PATH</text>
  <!-- Security Features -->
  <rect
     x="400"
     y="830"
     width="300"
     height="120"
     class="config-box"
     id="rect131" />
  <text
     x="420"
     y="850"
     class="icon-text"
     id="text132">🔒</text>
  <text
     x="450"
     y="855"
     class="header"
     id="text133">Fonctionnalités Sécurité</text>
  <text
     x="410"
     y="875"
     class="feature-text"
     id="text134">• HTTPS/SSL avec certificats personnalisés</text>
  <text
     x="410"
     y="890"
     class="feature-text"
     id="text135">• Authentification par session &amp; validation</text>
  <text
     x="410"
     y="905"
     class="feature-text"
     id="text136">• Limitation débit (60 requêtes/minute)</text>
  <text
     x="410"
     y="920"
     class="feature-text"
     id="text137">• Validation entrée avec schémas Zod</text>
  <text
     x="410"
     y="935"
     class="feature-text"
     id="text138">• CORS &amp; en-têtes sécurité (Helmet)</text>
  <!-- Performance Features -->
  <rect
     x="720"
     y="830"
     width="300"
     height="120"
     class="config-box"
     id="rect138" />
  <text
     x="740"
     y="850"
     class="icon-text"
     id="text139">⚡</text>
  <text
     x="770"
     y="855"
     class="header"
     id="text140">Fonctionnalités Performance</text>
  <text
     x="730"
     y="875"
     class="feature-text"
     id="text141">• Compression réponse (gzip/deflate)</text>
  <text
     x="730"
     y="890"
     class="feature-text"
     id="text142">• Pool connexions &amp; gestion</text>
  <text
     x="730"
     y="905"
     class="feature-text"
     id="text143">• Gestion limite jetons &amp; troncature</text>
  <text
     x="730"
     y="920"
     class="feature-text"
     id="text144">• Arrêt gracieux avec timeout</text>
  <text
     x="730"
     y="935"
     class="feature-text"
     id="text145">• Stratégie cache efficace mémoire</text>
  <!-- Monitoring & Observability -->
  <rect
     x="1040"
     y="830"
     width="280"
     height="120"
     class="config-box"
     id="rect145" />
  <text
     x="1060"
     y="850"
     class="icon-text"
     id="text146">📊</text>
  <text
     x="1090"
     y="855"
     class="header"
     id="text147">Surveillance &amp; Observabilité</text>
  <text
     x="1050"
     y="875"
     class="feature-text"
     id="text148">• Journal structuré avec Winston</text>
  <text
     x="1050"
     y="890"
     class="feature-text"
     id="text149">• Vérifications santé &amp; endpoints statut</text>
  <text
     x="1050"
     y="905"
     class="feature-text"
     id="text150">• Suivi erreur &amp; rapport</text>
  <text
     x="1050"
     y="920"
     class="feature-text"
     id="text151">• Surveillance signal (SIGTERM/SIGINT)</text>
  <text
     x="1050"
     y="935"
     class="feature-text"
     id="text152">• Collecte métriques performance</text>
  <!-- Data Flow Arrows -->
  <!-- Main vertical flow -->
  <path
     d="M 700 170 Q 700 180 700 190"
     class="arrow"
     id="path152" />
  <path
     d="M 700 260 Q 700 270 700 280"
     class="arrow"
     id="path153" />
  <path
     d="M 700 400 Q 700 410 700 420"
     class="arrow"
     id="path154" />
  <!-- To system components -->
  <!-- To process management -->
  <path
     d="M 700 690 Q 700 705 700 720"
     class="arrow"
     id="path158" />
  <!-- Elegant curved connections between components -->
</svg>
